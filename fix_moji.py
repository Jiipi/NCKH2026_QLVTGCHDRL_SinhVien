from pathlib import Path
import re

file_path = Path('frontend/src/pages/teacher/ModernReports.js')
text = file_path.read_text(encoding='utf-8')

# Use regex to find and replace mojibake patterns
text = re.sub(r'Tu\xE1\xBA\xA7n n\xC4\x82 y', 'Tuần này', text)
text = re.sub(r'Th\xC4\x81ng n\xC4\x82 y', 'Tháng này', text)
text = re.sub(r'N\xC4\x83m n\xC4\x82 y', 'Năm này', text)
text = re.sub(r'L\xC4\x82 m m\xC3\xA1\xC2\xBB\xC2\x9Bi', 'Làm mới', text)
text = re.sub(r'Xu\xC3\xA1\xC2\xBA\xC2\xA5t Excel', 'Xuất Excel', text)
text = re.sub(r'Xu\xC3\xA1\xC2\xBA\xC2\xA5t PDF', 'Xuất PDF', text)
text = re.sub(r'T\xC3\xA1\xC2\xBB\xC2\x95ng ho\xC3\xA1\xC2\xBA\xC2\xA1t \xC3\x84\xE2\x80\x98\xC3\xA1\xC2\xBB\xC2\x99ng', 'Tổng hoạt động', text)
text = re.sub(r'Trong kho\xC3\xA1\xC2\xBA\xC2\xA3ng th\xC3\xA1\xC2\xBB\xC2\x9Di gian', 'Trong khoảng thời gian', text)
text = re.sub(r'Sinh vi\xC3\x83\xC2\xAAn tham gia', 'Sinh viên tham gia', text)
text = re.sub(r'T\xC3\xA1\xC2\xBB\xC2\x95ng s\xC3\xA1\xC2\xBB\xC2\x91 sinh vi\xC3\x83\xC2\xAAn', 'Tổng số sinh viên', text)
text = re.sub(r'T\xC3\xA1\xC2\xBB\xC2\xB7 l\xC3\xA1\xC2\xBB\xC2\x87 tham gia', 'Tỷ lệ tham gia', text)
text = re.sub(r'Trung b\xC4\x82\xCC\x80nh', 'Trung bình', text)
text = re.sub(r'\xC3\x84i\xC3\xA1\xC2\xBB\xC2\x83m trung b\xC4\x82\xCC\x80nh', 'Điểm trung bình', text)
text = re.sub(r'\xC3\x84i\xC3\xA1\xC2\xBB\xC2\x83m r\xC3\x83\xC2\xA8n luy\xC3\xA1\xC2\xBB\xC2\x87n', 'Điểm rèn luyện', text)
text = re.sub(r'Chi ti\xC3\xA1\xC2\xBA\xC2\xBFt th\xC3\xA1\xC2\xBB\xE2\x80\x99ng k\xC3\x83\xC2\xAA', 'Chi tiết thống kê', text)
text = re.sub(r'L\xC6\xB0\xC3\xA1\xC2\xBB\xC2\xA3t \xC3\x84\xE2\x80\x98\xC4\x83ng k\xC3\xBD ho\xC3\xA1\xC2\xBA\xC2\xA1t \xC3\x84\xE2\x80\x98\xC3\xA1\xC2\xBB\xC2\x99ng', 'Lượt đăng ký hoạt động', text)
text = re.sub(r'T\xC3\xA1\xC2\xBB\xC2\x95ng sinh vi\xC3\x83\xC2\xAAn qu\xC3\xA1\xC2\xBA\xC2\xA3n l\xC3\xBD', 'Tổng sinh viên quản lý', text)
text = re.sub(r'T\xC3\xA1\xC2\xBB\xC2\xB7 l\xC3\xA1\xC2\xBB\xC2\x87 sinh vi\xC3\x83\xC2\xAAn tham gia', 'Tỷ lệ sinh viên tham gia', text)
text = re.sub(r'Ho\xC3\xA1\xC2\xBA\xC2\xA1t \xC3\x84\xE2\x80\x98\xC3\xA1\xC2\xBB\xC2\x99ng theo th\xC3\xA1ng', 'Hoạt động theo tháng', text)
text = re.sub(r'Bi\xC3\xA1\xC2\xBB\xC2\x83u \xC3\x84\xE2\x80\x98\xC3\xA1\xC2\xBB\xE2\x80\x9D s\xC3\xA1\xC2\xBA\xC2\xBD \xC3\x84\xE2\x80\x98\xC6\xB0\xC3\xA1\xC2\xBB\xC2\xA3c hi\xC3\xA1\xC2\xBB\xC2\x83n th\xC3\xA1\xC2\xBB\xC2\x8B \xC3\xA1\xC2\xBB\xC2\x9F \xC3\x84\xE2\x80\x98\xC3\xA2y', 'Biểu đồ sẽ được hiển thị ở đây', text)
text = re.sub(r'B\xC3\xA1o c\xC3\xA1o chi ti\xC3\xA1\xC2\xBA\xC2\xBFt', 'Báo cáo chi tiết', text)
text = re.sub(r'L\xC3\xA1\xC2\xBB\xC2\x8Dc>', 'Lọc>', text)
text = re.sub(r'Xu\xC3\xA1\xC2\xBA\xC2\xA5t b\xC3\xA1o c\xC3\xA1o', 'Xuất báo cáo', text)
text = re.sub(r'Ch\xC6\xB0a c\xC3\xB3 d\xC3\xA1\xC2\xBB\xC2\xAF li\xC3\xA1\xC2\xBB\xC2\x87u b\xC3\xA1o c\xC3\xA1o', 'Chưa có dữ liệu báo cáo', text)
text = re.sub(r'D\xC3\xA1\xC2\xBB\xC2\xAF li\xC3\xA1\xC2\xBB\xC2\x87u b\xC3\xA1o c\xC3\xA1o s\xC3\xA1\xC2\xBA\xC2\xBD \xC3\x84\xE2\x80\x98\xC6\xB0\xC3\xA1\xC2\xBB\xC2\xA3c hi\xC3\xA1\xC2\xBB\xC2\x83n th\xC3\xA1\xC2\xBB\xC2\x8B khi c\xC3\xB3 ho\xC3\xA1\xC2\xBA\xC2\xA1t \xC3\x84\xE2\x80\x98\xC3\xA1\xC2\xBB\xC2\x99ng', 'Dữ liệu báo cáo sẽ được hiển thị khi có hoạt động', text)

file_path.write_text(text, encoding='utf-8')
print('✅ Fixed all Vietnamese encoding issues in ModernReports.js')
