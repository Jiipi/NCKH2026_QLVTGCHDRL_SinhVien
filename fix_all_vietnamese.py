from pathlib import Path

file_path = Path('frontend/src/pages/teacher/ModernReports.js')
data = file_path.read_bytes()

# Comprehensive byte replacements for all remaining mojibake
replacements = [
    # Date range buttons
    (b'Th\xc4\x82\xc2\xa1ng n\xc4\x82\xc2\xa0y', b'Th\xc3\xa1ng n\xc3\xa0y'),  # Tháng này
    (b'N\xc4\x82\xc2\x83m n\xc4\x82\xc2\xa0y', b'N\xc4\x83m n\xc3\xa0y'),  # Năm này
    # Action buttons  
    (b'L\xc4\x82\xc2\xa0m m\xc3\xa1\xc2\xbb\xc2\x9bi', b'L\xc3\xa0m m\xe1\xbb\x9bi'),  # Làm mới
    # Stats cards
    (b'T\xc3\xa1\xc2\xbb\xc2\x95ng ho\xc3\xa1\xc2\xba\xc2\xa1t \xc3\x84\xe2\x80\x98\xc3\xa1\xc2\xbb\xc2\x99ng', b'T\xe1\xbb\x95ng ho\xe1\xba\xa1t \xc4\x91\xe1\xbb\x99ng'),  # Tổng hoạt động
    (b'Sinh vi\xc3\x83\xc2\xaan tham gia', b'Sinh vi\xc3\xaan tham gia'),  # Sinh viên tham gia
    (b'T\xc3\xa1\xc2\xbb\xc2\x95ng s\xc3\xa1\xc2\xbb\xc2\x91 sinh vi\xc3\x83\xc2\xaan', b'T\xe1\xbb\x95ng s\xe1\xbb\x91 sinh vi\xc3\xaan'),  # Tổng số sinh viên
    (b'T\xc3\xa1\xc2\xbb\xc2\xb7 l\xc3\xa1\xc2\xbb\xc2\x87 tham gia', b'T\xe1\xbb\xb7 l\xe1\xbb\x87 tham gia'),  # Tỷ lệ tham gia
    (b'\xc3\x84i\xc3\xa1\xc2\xbb\xc2\x83m trung b\xc3\xacnh', b'\xc4\x90i\xe1\xbb\x83m trung b\xc3\xacnh'),  # Điểm trung bình
    (b'\xc3\x84i\xc3\xa1\xc2\xbb\xc2\x83m r\xc3\xa8n luy\xc3\xa1\xc2\xbb\xc2\x87n', b'\xc4\x90i\xe1\xbb\x83m r\xc3\xa8n luy\xe1\xbb\x87n'),  # Điểm rèn luyện
    # Details section
    (b'Chi ti\xc3\xa1\xc2\xba\xc2\xbft th\xc3\xa1\xc2\xbb\xe2\x80\x99ng k\xc3\xaa', b'Chi ti\xe1\xba\xbft th\xe1\xbb\x91ng k\xc3\xaa'),  # Chi tiết thống kê
    (b'L\xc6\xb0\xc3\xa1\xc2\xbb\xc2\xa3t \xc3\x84\xe2\x80\x98\xc4\x83ng k\xc3\xbd ho\xc3\xa1\xc2\xba\xc2\xa1t \xc3\x84\xe2\x80\x98\xc3\xa1\xc2\xbb\xc2\x99ng', b'L\xc6\xb0\xe1\xbb\xa3t \xc4\x91\xc4\x83ng k\xc3\xbd ho\xe1\xba\xa1t \xc4\x91\xe1\xbb\x99ng'),  # Lượt đăng ký hoạt động
    (b'T\xc3\xa1\xc2\xbb\xc2\x95ng sinh vi\xc3\x83\xc2\xaan qu\xc3\xa1\xc2\xba\xc2\xa3n l\xc3\xbd', b'T\xe1\xbb\x95ng sinh vi\xc3\xaan qu\xe1\xba\xa3n l\xc3\xbd'),  # Tổng sinh viên quản lý
    (b'T\xc3\xa1\xc2\xbb\xc2\xb7 l\xc3\xa1\xc2\xbb\xc2\x87 sinh vi\xc3\x83\xc2\xaan tham gia', b'T\xe1\xbb\xb7 l\xe1\xbb\x87 sinh vi\xc3\xaan tham gia'),  # Tỷ lệ sinh viên tham gia
    # Charts
    (b'Ho\xc3\xa1\xc2\xba\xc2\xa1t \xc3\x84\xe2\x80\x98\xc3\xa1\xc2\xbb\xc2\x99ng theo th\xc3\xa1ng', b'Ho\xe1\xba\xa1t \xc4\x91\xe1\xbb\x99ng theo th\xc3\xa1ng'),  # Hoạt động theo tháng
    (b'Bi\xc3\xa1\xc2\xbb\xc2\x83u \xc3\x84\xe2\x80\x98\xc3\xa1\xc2\xbb\xe2\x80\x9d s\xc3\xa1\xc2\xba\xc2\xbd \xc3\x84\xe2\x80\x98\xc6\xb0\xc3\xa1\xc2\xbb\xc2\xa3c hi\xc3\xa1\xc2\xbb\xc2\x83n th\xc3\xa1\xc2\xbb\xc2\x8b \xc3\xa1\xc2\xbb\xc2\x9f \xc3\x84\xe2\x80\x98\xc3\xa2y', b'Bi\xe1\xbb\x83u \xc4\x91\xe1\xbb\x93 s\xe1\xba\xbd \xc4\x91\xc6\xb0\xe1\xbb\xa3c hi\xe1\xbb\x83n th\xe1\xbb\x8b \xe1\xbb\x9f \xc4\x91\xc3\xa2y'),  # Biểu đồ sẽ được hiển thị ở đây
    # Reports section
    (b'B\xc3\xa1o c\xc3\xa1o chi ti\xc3\xa1\xc2\xba\xc2\xbft', b'B\xc3\xa1o c\xc3\xa1o chi ti\xe1\xba\xbft'),  # Báo cáo chi tiết
    (b'L\xc3\xa1\xc2\xbb\xc2\x8dc>', b'L\xe1\xbb\x8dc>'),  # Lọc>
    (b'Ch\xc6\xb0a c\xc3\xb3 d\xc3\xa1\xc2\xbb\xc2\xaf li\xc3\xa1\xc2\xbb\xc2\x87u b\xc3\xa1o c\xc3\xa1o', b'Ch\xc6\xb0a c\xc3\xb3 d\xe1\xbb\xaf li\xe1\xbb\x87u b\xc3\xa1o c\xc3\xa1o'),  # Chưa có dữ liệu báo cáo
    (b'D\xc3\xa1\xc2\xbb\xc2\xaf li\xc3\xa1\xc2\xbb\xc2\x87u b\xc3\xa1o c\xc3\xa1o s\xc3\xa1\xc2\xba\xc2\xbd \xc3\x84\xe2\x80\x98\xc6\xb0\xc3\xa1\xc2\xbb\xc2\xa3c hi\xc3\xa1\xc2\xbb\xc2\x83n th\xc3\xa1\xc2\xbb\xc2\x8b khi c\xc3\xb3 ho\xc3\xa1\xc2\xba\xc2\xa1t \xc3\x84\xe2\x80\x98\xc3\xa1\xc2\xbb\xc2\x99ng', b'D\xe1\xbb\xaf li\xe1\xbb\x87u b\xc3\xa1o c\xc3\xa1o s\xe1\xba\xbd \xc4\x91\xc6\xb0\xe1\xbb\xa3c hi\xe1\xbb\x83n th\xe1\xbb\x8b khi c\xc3\xb3 ho\xe1\xba\xa1t \xc4\x91\xe1\xbb\x99ng'),  # Dữ liệu báo cáo sẽ được hiển thị khi có hoạt động
]

count = 0
for mojibake, correct in replacements:
    if mojibake in data:
        data = data.replace(mojibake, correct)
        count += 1
        print(f'✓ Fixed encoding issue #{count}')

if count > 0:
    file_path.write_bytes(data)
    print(f'\n✅ Fixed {count} encoding issues in ModernReports.js')
else:
    print('✗ No encoding issues found')
